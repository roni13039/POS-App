@model POSApplication.Models.SalesInvoiceMas

@{
    ViewBag.Title = "Create";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
   
<div class="panel panel-primary panel-bordered">
    <div class="panel-heading">
        <h5 class="panel-title">Create Sales Invoice</h5>
    </div>
    <div class="panel-body">


        @using (Html.BeginForm())
        {
            @Html.AntiForgeryToken()

            <div class="form-horizontal">
                @*<h4>SalesInvoiceMa</h4>
                    <hr />*@
                @Html.ValidationSummary(true, "", new { @class = "text-danger" })
                      @Html.HiddenFor(m => m.Id)
                <div class="row">
                    <div class="col-lg-3" @*style="padding-left: 50px;"*@>
                        <div class="form-group form-group-xs">
                            @Html.Label("InvoiceNo", new { @class = "control-label col-lg-4" })
                            <div class="col-lg-8">
                                @Html.TextBox("InvoiceNo", null, new { @class = "form-control", @Value = @ViewBag.BillNo })
                            </div>
                        </div>
                    </div>

                    <div class="col-lg-3">
                        <div class="form-group form-group-xs">
                            @Html.Label("Date", new { @class = "control-label col-lg-4" })
                            <div class="col-lg-8">
                                @Html.TextBox("Date", null, new { @class = "form-control Datepicker" })
                            </div>
                        </div>
                    </div>

                    <div class="col-lg-3">
                        <div class="form-group form-group-xs">
                            @Html.Label("Phone", new { @class = "control-label col-lg-4" })
                            <div class="col-lg-8">
                                @Html.TextBox("Phone",null, new { @class = "form-control Phone" })
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-3">
                        <div class="form-group form-group-xs">
                            @Html.Label("Customer Name", new { @class = "control-label col-lg-6" })
                            <div class="col-lg-6">
                                @Html.TextBox("CustomerName", null, new { @class = "form-control" })

                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-lg-3">
                        <div class="form-group form-group-xs">
                            @Html.Label("Address", new { @class = "control-label col-lg-4" })
                            <div class="col-lg-8">
                                @Html.TextBox("Address", null, new { @class = "form-control" })

                            </div>
                        </div>
                    </div>
                    <div class="col-lg-3">
                        <div class="form-group form-group-xs">
                            @Html.Label("Description", new { @class = "control-label col-lg-4" })
                            <div class="col-lg-8">
                                @Html.TextBox("Description", null, new { @class = "form-control" })
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-3">
                        <div class="form-group form-group-xs">
                            @Html.Label("TotalBill", new { @class = "control-label col-lg-4" })
                            <div class="col-lg-8">
                                @Html.TextBox("TotalBill", null, new { @class = "form-control",@readonly="readonly" })

                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-lg-12">
                        <div class="form-group form-group-xs">
                            <div class="col-lg-3">
                                @Html.Label("Product Serial No  (Barcode) ", new { @class = "control-label col-lg-12", @style = "text-align:left" })
                            </div>
                            <div class="col-lg-6">
                                @Html.TextBox("SerialNo", null, new { @class = "form-control", @style = "text-align:left" })
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        }
        @*//----------Details Table--------------//*@


    <div class="details well" style="        border: 1px solid white;
">
        <div class="table-responsive">
            <table class="table table-bordered TableItemDetails" id="TableDetails">
                <thead>
                    <tr class="bg-blue-gradient">

                        <th class="col-sm-1">Sl No</th>
                        <th class="col-lg-1">Product Category</th>
                        <th class="col-lg-1">Product Name</th>
                        <th class="col-lg-1">Serial No</th>
                        <th class="col-lg-1">Purchase Price</th>
                        <th class="col-lg-1">Sales Price</th>
                        <th class="col-lg-1">Qty</th>
                        <th class="col-lg-1">Amount</th>
                        <th class="col-lg-1">Action</th>
                    </tr>

                </thead>
                <tbody>
                    <tr>
                        <td><button type="button" class="btn btn-success btn-rounded btn-sm" id="btnAddRow"><span class="glyphicon glyphicon-plus"></span> Add Row</button> </td>
                        @*<td></td>*@
                    </tr>
                </tbody>
                <tfoot>

                    <tr>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td colspan="1" style="text-align:right;  padding-right:20px;" height="30px;">&nbsp; Total</td>
                        <td>
                            @*<label class="text-bold total_amount" style="padding-left:10px;"></label>*@
                            <input type="text" name="TotalAmount" class="bg-primary text-white" id="TotalAmount" readonly />
                        </td>

                </tfoot>
            </table>
        </div>

    </div>
        @*//-------------End Details table----------------//*@
        <br>


        <div class="form-group">
            <div class="col-md-offset-4 col-lg-10">
                @Html.ActionLink("Back to List", "Index", null, new { @class = "btn btn-warning" })
                <input type="button" id="Save" value="Save" class="btn btn-success" />
            </div>
        </div>

    </div>
</div>

@section Scripts {
    <link rel="stylesheet" href="//code.jquery.com/ui/1.13.1/themes/base/jquery-ui.css">
    <link rel="stylesheet" href="/resources/demos/style.css">
    @Scripts.Render("~/bundles/jqueryval")

    <link href="~/Content/plugins/datepicker/datepicker3.css" rel="stylesheet" />
    <script src="~/Content/plugins/datepicker/bootstrap-datepicker.js"></script>

    <script type="text/javascript">

        //for edit load data
        $('document').ready(function ()
        {
            if ($('#Id').val())
            {
                LoadSavedData();
            }
          

        });

        function LoadSavedData()
        {
            var Id = $("#Id").val();
          
            $.ajax({
                type: "post",
                url: "/SalesInvoice/GetSavedData",
                datatype: "json",
                data: { Id: Id },
                traditional: true,
                success: function (data)
                {
                    console.log(data);

                    var si = 0;
                    for (var i = 0; i < data.length; i++) {

                        var si = i + 1;
                        var newRow = jQuery('<tr>'

                       + '<td><input type="text" name="SlNo" value="' + si + '" class="form-control  input-sm SlNo" readonly/></td>'

                       + '<td><select name="ProductCategory" class="ProductCategory form-control input-sm select2"><option value="' + data[i].ProductCategoryId + '">' + data[i].ProductCatagoryName + '</option>  </select></td>'
                       + '<td><select name="ProductName" class="ProductName col-lg-1 form-control input-sm select2"><option value="' + data[i].ProductId + '">' + data[i].ProductName + '</option> </select></td>'
                       + '<td><input type="text" name="SerialNo" value="' + data[i].SerialNo + '"  class="form-control input-sm SerialNo" readonly/></td>'
                       + '<td><input type="text" name="PurchasePrize" value="' + data[i].PurchasePrize + '" class="form-control input-sm PurchasePrize inline" style="width: 60px;"/> </td>'
                       + '<td><input type="text" name="SalesPrize" value="' + data[i].SalesPrize + '" class="form-control input-sm SalesPrize"/></td>'
                       + '<td><input type="text" name="Qty" value="' + data[i].Qty + '"   class="form-control input-sm Qty"/></td>'
                       + '<td><input type="text" name="Amount" value="' + data[i].Amount + '" class="form-control input-sm Amount" readonly/></td>'

                      + '<td><button onclick="RemoveRow(this)" type="button" class="btn btn-xs labeled btn-danger"><i class="glyphicon glyphicon-remove"></i></td></tr>');
                        jQuery('table.TableItemDetails tbody').find('tr:last').before(newRow);


                    }
                    GetProductCatagoryName();
                    GetProductName();

                    CalculateAmount();

                    var lent = $('table.TableItemDetails tbody tr').length - 1;
                    if (lent > 0) {
                        $("#Save").removeAttr('disabled');
                    }
                }
            });
        }


        $('#Phone').on('keypress', function (e) {
            if (e.keyCode === 13) {
                $.ajax({
                    url: '/SalesInvoice/GetCustomerInfoByPhone/',
                    data: "{'Phone': '" + $('#Phone').val() + "'}",
                    dataType: "json",
                    type: "POST",
                    contentType: "application/json; charset=utf-8",
                    success: function (data) {
                        console.log(data);
                        $("#CustomerName").val(data.CustomerName);
                        $("#Address").val(data.Address);
                        $("#Phone").val(data.Phone);

                    },
                    error: function (response) {
                        alert(response.responseText);
                    },
                    failure: function (response) {
                        alert(response.responseText);
                    }
                });

            }
        });

        $('#SerialNo').on('keypress', function (e)
        {
            if (e.keyCode === 13) {
                $.ajax({
                    url: '/SalesInvoice/GetProductBySerialNo/',
                    data: "{'SerialNo': '" + $('#SerialNo').val() + "'}",
                    dataType: "json",
                    type: "POST",
                    contentType: "application/json; charset=utf-8",
                    success: function (data)
                    {
                        $('#SerialNo').val('');
                        loadProductBySerialNo(data);

                    },
                    error: function (response) {
                        alert(response.responseText);
                    },
                    failure: function (response) {
                        alert(response.responseText);
                    }
                });

            }
        });
        function loadProductBySerialNo(data)
        {
        
            var lent = $('table.TableItemDetails tbody tr').length-1;
            for (var i = 0; i < data.length; i++)
            {
                lent++;
              var newRow = jQuery('<tr>'
                + '<td><input type="text" name="SlNo" value="' + lent + '" class="form-control  input-sm SlNo" readonly/></td>'
                + '<td><select name="ProductCategory" class="ProductCategory form-control input-sm select2"   style="width:100px;" ><option value="' + data[i].ProductCategoryId + '">' + data[i].ProductCatagoryName + '</option>  </select></td>'
                + '<td><select name="ProductName" class="ProductName col-lg-1 form-control input-sm select2" style="width:100px;" ><option value="' + data[i].ProductId + '">' + data[i].ProductName + '</option> </select></td>'
                + '<td><input type="text" name="SerialNo" value="' + data[i].SerialNo + '"  class="form-control input-sm SerialNo" style="width:180px;" readonly/></td>'
                + '<td><input type="number" name="PurchasePrize" value="' + data[i].PurchasePrize + '"  class="form-control input-sm PurchasePrize" style="width:100px;" readonly/></td>'
                + '<td><input type="number" name="SalesPrize"   value="' + data[i].SalesPrice + '"  class="form-control input-sm SalesPrize" style="width:100px;"/></td>'
                + '<td><input type="number" name="Qty"  class="form-control input-sm Qty" style="width:100px;"  /></td>'
                + '<td><input type="number" name="Amount"   class="form-control input-sm Amount" style="width:150px;" readonly/></td>'

                + '<td><button onclick="RemoveRow(this)" type="button" class="btn btn-xs labeled btn-danger"><i class="glyphicon glyphicon-remove"></i></td></tr>');

                jQuery('table.TableItemDetails tbody').find('tr:last').before(newRow);

                   var lent = $('table.TableItemDetails tbody tr').length - 1;
                   if (lent > 0)
                   {
                        $("#Save").removeAttr('disabled');
                   }

                }
        }


    </script>


    <script type="text/javascript">
        $('document').ready(function () {
           
            $('.Datepicker').datepicker({
                format: 'dd/mm/yyyy',
                todayHighlight: true,
                todayBtn: true,
                autoclose: true
            });

            $(".select2").select2();
            $("#Save").attr("disabled", "disabled");

        });



        function GetCustomerName() {
            $.ajax({
                url: "/SalesInvoice/GetCustomerName",
                type: "post",
                data: {},
                dataType: "json",
                async: false,
                success: function (data) {
                    $("#CustomerId").append(new Option("Select", ""));
                    $.each(data, function (i, item) {
                        var optionhtml = '<option value="' + data[i].Value + '">' + data[i].Text + '</option>';
                        $("#CustomerId").append(optionhtml);
                    });
                },
            });
        }

        var SlNo = 0;
        var count = 0;
        //--------------Add New Row ----- Details Table----
        $('#btnAddRow').click(function ()
        {

            if (count > 0) {
                var newserial = 0;
                $('table.TableItemDetails tbody .SlNo').each(function (index) {
                    newserial = 0;
                    newserial = newserial + index * 1 + 1;
                });
                SlNo = newserial;
            }

            var rowIndex = $(this).closest('tr').index();

            AddNewRow(rowIndex);

            var lent = $('table.TableItemDetails tbody tr').length - 1;
            if (lent > 0) {
                $("#Save").removeAttr('disabled');
            }
        });


        function AddNewRow(rowIndex)
        {
            SlNo++;

            var newRow = jQuery('<tr>'
                + '<td><input type="text" name="SlNo" value="' + SlNo + '" class="form-control  input-sm SlNo" readonly/></td>'

                + '<td><select name="ProductCategory" class="ProductCategory form-control input-sm select2"></select></td>'
                + '<td><select name="ProductName" class="ProductName col-lg-1 form-control input-sm select2"></select></td>'
                + '<td><input type="text" name="SerialNo" class="form-control input-sm SerialNo" style="width:180px;" readonly/></td>'
                + '<td><input type="number" name="PurchasePrize" class="form-control input-sm PurchasePrize" style="width:100px;" readonly/></td>'
                + '<td><input type="number" name="SalesPrize" class="form-control input-sm SalesPrize" style="width:100px;" /></td>'
                + '<td><input type="number" name="Qty"   class="form-control input-sm Qty" style="width:100px;"  /></td>'
                + '<td><input type="number" name="Amount" class="form-control input-sm Amount" readonly/></td>'

                + '<td><button onclick="RemoveRow(this)" type="button" class="btn btn-xs labeled btn-danger"><i class="glyphicon glyphicon-remove"></i></td></tr>');
            jQuery('table.TableItemDetails tbody').find('tr:last').before(newRow);

            GetProductCatagoryName(rowIndex);
            // GetProductName();
        }


        // LOad Product Catagory For Addd new Row-----------//

        function GetProductCatagoryName(rowIndex)
        {

            $.ajax({
                url: "/SalesInvoice/GetProductCatagoryName",
                type: "post",
                data: {},
                dataType: "json",
                async: false,
                success: function (data)
                {
                    console.log(rowIndex);

                    $(".ProductCategory").append(new Option("Select", ""));

                    $.each(data, function (i, item)
                    {
                        var optionhtml = '<option value="' + data[i].Value + '">' + data[i].Text + '</option>';

                        $('Table.TableItemDetails tbody tr').eq(rowIndex).find("select.ProductCategory").append(optionhtml);
                   
                    });
                     $(".select2").select2({ width: '100%' });
                },
            });
        }

        function GetProductName() {
            $.ajax({
                url: "/SalesInvoice/GetProductName",
                type: "post",
                data: {},
                dataType: "json",
                async: false,
                success: function (data) {
                    //$(".ProductName").empty();
                    $(".ProductName").append(new Option("Select", ""));

                    $.each(data, function (i, item) {
                        var optionhtml = '<option value="' +     data[i].Value + '">' + data[i].Text + '</option>';
                        $(".ProductName").append(optionhtml);
                    });
                    $(".select2").select2({ width: '100%' });
                },
            });
        }



        //------- Load Product Name On Change Of Product catagory======//

        $('table.TableItemDetails tbody').on('change', '.ProductCategory', function ()
        {

            var ProductCategoryId = $(this).val();
            var Currentrow = $(this).closest('tr');
            CurrentRowIndex = $(this).closest('tr').index();

          
                $.ajax({
                    url: "/SalesInvoice/GetProductByCatagoryId",
                    type: "POST",
                    dataType: 'json',
                    contentType: 'application/x-www-form-urlencoded; charset=UTF-8',
                    data: {
                        ProductCategoryId: ProductCategoryId
                    },
                    success: function (data)
                    {
                        if (data == false)
                        {
                            Swal.fire({
                                position: 'top',
                                icon: 'error',
                                title: 'There is No Product For This Product Category!'
                            })
                        }
                        Currentrow.find(".ProductName").empty();
                        Currentrow.find(".ProductName").removeAttr('disabled');
                        Currentrow.find(".PurchasePrize").val("");

                        Currentrow.find(".ProductName").append(new Option("Select", ""));
                        $.each(data, function (i, item)
                        {
                            var optionhtml = '<option value="' + data[i].Value + '">' + data[i].Text + '</option>';
                            Currentrow.find(".ProductName").append(optionhtml);
                        });

                        $(".select2").select2({ width: '100%' });
                    },
                    error: function () {
                        alert('Something went wrong!');
                    }
                });
           
        });
        //-----End-------   //------- Load Product Name On Change Of Product catagory======//

        //------------- Check The previous Item Is Exist Or Not----------//
        function IsExist(id, CurrentRowIndex) {

            var currentIndex = CurrentRowIndex;
            $('table.TableItemDetails tbody .ProductCategory').each(function (i, item) {

                if (currentIndex == i) {
                    isValid = false;
                    return true;
                }
                else if (item.value == id) {
                    isValid = true;
                    return false;
                }
            });
            return isValid;
        }


        //--------------Load Product Prize & Sale Prize on Change Product Name------------//

        $('table.TableItemDetails tbody').on('change', '.ProductName', function ()
        {

            var ProductId = $(this).val();
            var Currentrow = $(this).closest('tr');
            $.ajax({
                url: "/SalesInvoice/GetPrizeByProductId",
                type: "POST",
                dataType: 'json',
                contentType: 'application/x-www-form-urlencoded; charset=UTF-8',
                data: { ProductId: ProductId },
                success: function (data)
                {
                  
                    if (data)
                    {
                          Currentrow.find('input.PurchasePrize').val(data.PurchasePrize);
                    }
                    else
                    {
                        Swal.fire({
                        position: 'top',
                        icon: 'error',
                        title: 'This Product Price is not Set'
                         })
                    }
                    //CalculateTotal();
                },
                error: function ()
                {
                    alert('Something went wrong!');
                }
            });
        });



        //---------------- Get Amount By On change Quantity=========//
        $('table.TableItemDetails tbody').on('keyup', '.Qty', function () {
            var Currentrow = $(this).closest('tr');
            var Quantity = $(this).val();
            var prize = Currentrow.find('.SalesPrize').val();
            var Amount = Quantity * 1.00 * prize * 1.00;

            Currentrow.find('input.Amount').val(Amount.toFixed(2));

            CalculateAmount();
        });

        //---------------- Get Amount By On change sales Price=========//
        $('table.TableItemDetails tbody').on('keyup', '.SalesPrize', function () {
            var Currentrow = $(this).closest('tr');
            var SalesPrize = $(this).val();
            var quantity = Currentrow.find('.Qty').val();
            var Amount = quantity * 1.00 * SalesPrize * 1.00;

            Currentrow.find('input.Amount').val(Amount.toFixed(2));

            CalculateAmount();
        });

        $('table.TableItemDetails tbody').on('blur', '.SalesPrize', function () {
            var Currentrow = $(this).closest('tr');
            var SalesPrize = $(this).val()*1.00;
            var PurchasePrize = Currentrow.find('.PurchasePrize').val()*1.00;
            if (SalesPrize < PurchasePrize)
            {
                Swal.fire({
                    position: 'top',
                    icon: 'error',
                    title: 'Please Enter  Sales Price Greater than  Purchase Prize!'

                });
                $(this).val('');

            }
          
        });


        function CalculateAmount() {
            var sumAmount = 0;
            $("table.TableItemDetails tbody .Amount").each(function () {
                sumAmount = sumAmount * 1.00 + $(this).val() * 1.00;
            });

            $('#TotalAmount').val(sumAmount.toFixed(2));
            $('#TotalBill').val(sumAmount.toFixed(2));
        }

        //------------Remove Details Row-------//
        function RemoveRow(e)
        {
            count++;

            var currRowIndex = $(e).closest('tr').index() + 1;
            $(e).parent().parent().remove();

            //----------Update Serila Number------------//

            $('table.TableItemDetails tbody .SlNo').each(function (index) {
                $(this).val(index + 1);
            });

            CalculateAmount();
        }
        //-------------Start Save-------------//

        $('#Save').click(function () {

            //if ($('#CustomerId').val() == "")
            //{
            //    Swal.fire({
            //        position: 'top',
            //        icon: 'error',
            //        title: 'Customer Name is Required'
            //    })
            //    $('#CustomerId').focus();
            //}

             if ($('#PaidBill').val() == "") {
                Swal.fire({
                    position: 'top',
                    icon: 'error',
                    title: 'Paid Bill is Required'
                })
                $('#PaidBill').focus();
            }

            else if (CheckDetailData() == true) {
                SaveData();
            }
        });


        function CheckDetailData()
        {
            if ($('.TableItemDetails tbody tr').length == 1)
            {
                Swal.fire({
                    position: 'top',
                    icon: 'error',
                    title: 'Please Enter  Details Item!'

                });
                return false;
            }

            var totRow = $('.TableItemDetails tbody tr').length - 1;
            //alert(totRow);
            for (var i = 0; i < totRow; i++) {

                if ($('Table.TableItemDetails tbody tr').eq(i).find("select.ProductCategory").val() == "") {
                    Swal.fire({
                        position: 'top',
                        icon: 'error',
                        title: 'The Product Category is Required'

                    });
                    return false;
                }
                else if ($('Table.TableItemDetails tbody tr').eq(i).find("select.ProductName").val() == "") {
                    Swal.fire({
                        position: 'top',
                        icon: 'error',
                        title: 'The Product Name is Required'
                    });
                    return false;
                }

                else if ($('Table.TableItemDetails tbody tr').eq(i).find("input.Qty").val() == "") {
                    Swal.fire({
                        position: 'top',
                        icon: 'error',
                        title: 'Quantity Field is Required'
                    });
                    return false;
                }
                else if ($('Table.TableItemDetails tbody tr').eq(i).find("input.SalesPrize").val() == "") {
                    Swal.fire({
                        position: 'top',
                        icon: 'error',
                        title: 'Sales price  Field is Required'
                    });
                    return false;
                }
            }
            return true;
        }



        function SaveData() {

            var InvoiceNo = $('#InvoiceNo').val();
            var Id = $('#Id').val();
            var Date = $('#Date').val();
            var CustomerName = $('#CustomerName').val();
            var Phone = $('#Phone').val();

            var Address = $('#Address').val();
            var Description = $('#Description').val();
            var TotalBill = $('#TotalBill').val();


            var ProductCategory = document.getElementsByName("ProductCategory");
            var ProductName = document.getElementsByName("ProductName");
            var PurchasePrize = document.getElementsByName("PurchasePrize");
            var SerialNo = document.getElementsByName("SerialNo");
            var SalesPrize = document.getElementsByName("SalesPrize");
            var Qty = document.getElementsByName("Qty");
            var Amount = document.getElementsByName("Amount");

            var DetailsValue = [];
            for (var i = 0; i < ProductCategory.length; i++) {

                DetailsValue.push({
                    ProductCategoryId: ProductCategory[i].value,
                    ProductId: ProductName[i].value,
                    PurchasePrize: PurchasePrize[i].value,
                    SerialNo: SerialNo[i].value,
                    SalesPrize: SalesPrize[i].value,
                    Quantity: Qty[i].value,
                    Amount: Amount[i].value
                });
            }
            console.log(DetailsValue);
            try {

           

            $.ajax({
                url: "/SalesInvoice/SaveSalesInvoice",
                type: "POST",
                dataType: 'json',
                contentType: 'application/x-www-form-urlencoded; charset=UTF-8',
                data: {
                    SalesInvoiceDetails: DetailsValue,
                    InvoiceNo: InvoiceNo,
                    CustomerName: CustomerName,
                    Date: Date,
                    Phone: Phone,
                    Address: Address,
                    Description: Description,
                    TotalBill: TotalBill,
                    Id:Id
                },

                success: function (result)
                {
                 
                    var id = result.id;


                    if (result.flag == true)
                    {
                        Swal.fire({
                            position: 'top',
                            icon: 'success',
                            title: 'Successfully Saved!',
                            showConfirmButton: true,
                        }).then((result) =>
                        {
                            if (result.value)
                            {
                                console.log(id);
                                window.open("/SalesReport/ExportToPDF/" + id, '_blank');
                                window.setTimeout(function ()
                                {
                                    window.location = "/SalesInvoice/Create";
                                }, 1000);
                            }
                        });

                       // window.location = "/SalesInvoice/PrintMemoReport";
                    }

                    //$("#Save").removeAttr("disabled");
                    //if (result.flag == true) {
                    //    Swal.fire({
                    //        position: 'top',
                    //        icon: 'success',
                    //        title: 'Successfully Saved!',
                    //        showConfirmButton: true,
                    //    }).then((result) => {
                    //        if (result.value) {
                    //            window.location = "/SalesInvoice/Index";
                    //        }
                    //    })
                    //}

                    //else {
                    //    alert("Data Saved Failed");
                    //}
                },
                error: function () {
                    alert('Something went wrong!');
                }

            });
            } catch (e)
            {
                alert(e);

            }


        }


    </script>
}
