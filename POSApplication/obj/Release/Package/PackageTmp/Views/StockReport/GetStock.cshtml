
@{
    ViewBag.Title = "GetStock";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="panel panel-primary panel-bordered">
    <div class="panel-heading">
        <h5 class="panel-title">Products Stock Information</h5>
    </div>
    <div class="panel-body">
        @using (Html.BeginForm("GetStock", "StockReport", FormMethod.Post, new { target = "_blank" }))
        {
            @Html.AntiForgeryToken()

            <div class="form-horizontal">
                @*<h4>ExpenseType</h4>
                    <hr />*@
                @Html.ValidationSummary(true, "", new { @class = "text-danger" })

             
                <div class="form-group">
                    @*@Html.LabelFor(model => model.ExpenseType1, htmlAttributes: new { @class = "control-label col-md-2" })*@
                    @Html.Label("Date From", htmlAttributes: new { @class = "control-label col-md-2" })
                    <div class="col-md-5">
                        @Html.TextBox("DateFrom", "", new { @class = "form-control Datepicker", @id = "DateFrom" })
                 
                    </div>
                </div>
                <div class="form-group">
                    @*@Html.LabelFor(model => model.ExpenseType1, htmlAttributes: new { @class = "control-label col-md-2" })*@
                    @Html.Label("Date To", htmlAttributes: new { @class = "control-label col-md-2" })
                    <div class="col-md-5">
                        @Html.TextBox("DateTo", "", new { @class = "form-control Datepicker", @id= "DateTo" })

                    </div>
                </div>
                <div class="form-group">
                    @*@Html.LabelFor(model => model.ExpenseType1, htmlAttributes: new { @class = "control-label col-md-2" })*@
                    @Html.Label("Product Category", htmlAttributes: new { @class = "control-label col-md-2" })
                    <div class="col-md-5">
                        @Html.DropDownList("ProductCategoryId", null,"--All--", new { @class = "form-control select2" })

                    </div>
                </div>
                <div class="form-group">
                    @*@Html.LabelFor(model => model.ExpenseType1, htmlAttributes: new { @class = "control-label col-md-2" })*@
                    @Html.Label("Product Name", htmlAttributes: new { @class = "control-label col-md-2" })
                    <div class="col-md-5">
                        @Html.DropDownList("ProductId", Enumerable.Empty<SelectListItem>(), "--All--", new { @class = "form-control select2" })

                    </div>
                </div>
                @*<div class="form-group">
                        @Html.Label("Supplier", new { @class = "control-label col-md-2" })
                    <div class="col-md-5">
                        @Html.DropDownList("SupplierId", null, "--Select--", htmlAttributes: new { @class = "form-control select2 input-xs" })

                    </div>
                    
                </div>*@
               
                <div class="form-group">
                    <div class="col-md-offset-2 col-md-10">
                      
                        <input type="submit" value="Generate Pdf" class="btn btn-success" />
                    </div>
                </div>
            </div>
        }

        @*<div>
                @Html.ActionLink("Back to List", "Index")
            </div>*@

    </div> <!-- panel body -->
</div>

@*<link href="~/Content/plugins/datepicker/datepicker3.css" rel="stylesheet" />
<script src="~/Content/plugins/datepicker/bootstrap-datepicker.js"></script>*@ 
<script type="text/javascript">

$('document').ready(function ()
{
    $('.Datepicker').datepicker({
        format: 'dd/mm/yyyy',
        todayHighlight: true,
        todayBtn: true,
        autoclose: true
    });

    $(".select2").select2();
    $('body').on('change', '#ProductCategoryId', function ()
    {
        var ProductCategoryId = $(this).val();

        $.ajax({
            url: "/POSBase/GetProductByCatagoryId",
            type: "POST",
            dataType: 'json',
            contentType: 'application/x-www-form-urlencoded; charset=UTF-8',
            data:
                {
                ProductCategoryId: ProductCategoryId
             },
            success: function (data)
            {
                if (data == false)
                {
                    alert("This Product Category Has No Product!");
                }
                console.log(data);
                $("#ProductId").empty();
                $("#ProductId").append(new Option("--All--", ""));
                $.each(data, function (i, item)
                {
                    var optionhtml = '<option value="' + data[i].Value + '">' + data[i].Text + '</option>';
                    $("#ProductId").append(optionhtml);

                });
            },
            error: function () {
                alert('Something went wrong!');
            }
        });

    });

});




</script>